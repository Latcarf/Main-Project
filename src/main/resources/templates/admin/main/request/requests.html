<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Requests</title>
    <th:block th:insert="~{fragments/favicon :: favicon}"></th:block>
    <link rel="stylesheet" th:href="@{/css/normalize.css}"/>
    <link rel="stylesheet" th:href="@{/css/menu.css}"/>
    <link rel="stylesheet" th:href="@{/css/request.css}"/>
</head>

<body>
<div th:replace="~{admin/menu :: menu}"></div>

<div class="content-wrapper">
    <div class="page-header">
        <h2 class="page-title">Requests</h2>
        <div class="breadcrumb">
            <a th:href="@{/admin/menu}">Home</a> >
            <a th:href="@{/admin/main/requests}">Requests</a>
        </div>
    </div>

    <div class="actions">
        <form th:action="@{/admin/requests/export}" method="get" style="display:inline;">
            <button class="btn-export" type="submit">Export to Excel</button>
        </form>
    </div>

    <div class="table-container">
        <table class="fl-table">
            <thead>
            <tr>
                <th>Name</th>
                <th>Phone</th>
                <th>Email</th>
                <th>Comment</th>
                <th>Date</th>
                <th>Status</th>
                <th></th>
            </tr>
            <tr class="filters">
                <td><input type="text" class="filter-input" name="name"/></td>
                <td><input type="text" class="filter-input" name="phone"/></td>
                <td><input type="text" class="filter-input" name="email"/></td>
                <td></td>
                <td><input type="date" class="filter-date" name="date"/></td>
                <td>
                    <select class="filter-select" name="status">
                        <option value="">All</option>
                        <option value="NEW" class="status-option new">New</option>
                        <option value="ANSWERED" class="status-option answered">Answered</option>
                    </select>
                </td>
                <td><button class="btn-clear" th:action="@{/admin/requests/clear-filters}" type="submit">Clear</button></td>
            </tr>
            </thead>
            <tbody>
            <tr th:each="request : ${pageRequests}">
                <td th:text="${request.userName}"></td>
                <td th:text="${request.phone}"></td>
                <td th:text="${request.email}"></td>
                <td th:utext="${#strings.abbreviate(request.description, 30)}"></td>
                <td th:text="${#temporals.format(request.date, 'dd.MM.yyyy - HH:mm')}"></td>
                <td>
                    <span th:classappend="'status ' + ${request.status.toLowerCase()}" th:text="${request.status}"></span>

                </td>
                <td>
                    <div class="btn-group">
                        <form th:action="@{/admin/main/requests/view/{id}(id=${request.id})}" method="get" style="display:inline;">
                            <button class="btn-action" type="submit">View</button>
                        </form>
                        <form th:action="@{/admin/main/requests/delete/{id}(id=${request.id})}" method="post" style="display:inline;">
                            <button class="btn-delete" type="submit">Delete</button>
                        </form>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>

        <div class="pagination">
        <!--&lt;!&ndash;            <a th:each="i : ${#numbers.sequence(1, totalPages)}"&ndash;&gt;-->
        <!--&lt;!&ndash;               th:href="@{/admin/requests/pages(page=${i})}"&ndash;&gt;-->
        <!--&lt;!&ndash;               th:text="${i}"&ndash;&gt;-->
        <!--&lt;!&ndash;               th:classappend="${i == currentPage} ? 'active' : ''">1</a>&ndash;&gt;-->
            <a th:href="@{/admin/main/requests}" th:text="1"></a>
            <a th:href="@{/admin/main/requests}" th:text="2"></a>
            <a th:href="@{/admin/main/requests}" th:text="3"></a>

        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/menu-toggle.js"></script>
<script src="/js/submenu-toggle.js"></script>
</body>
</html>
